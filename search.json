[
  {
    "objectID": "notebooks/aizcorbe_example_3.2.html",
    "href": "notebooks/aizcorbe_example_3.2.html",
    "title": "Aizcorbe (2014), ex 3.2. Hedonic dummy variable method",
    "section": "",
    "text": "Example of dummy variable hedonic method (from Aizcorbe 2014, example 3.2)\nIn Example 3.2, constructed a sythentic scanner dataset\n\n\n\n\n Back to top"
  },
  {
    "objectID": "notebooks/aizcorbe_example_2.1.html",
    "href": "notebooks/aizcorbe_example_2.1.html",
    "title": "Aizcorbe (2014), ex 2.1. Bilateral fixed-base and chained indices",
    "section": "",
    "text": "This notebook goes through a fixed-base and chained bilateral indices methods demonstrated by Aizcorbe (2014) in 2.1. This this example Ana Aizcorbe uses US National Income and Product Accounts data from the BEA to demonstrate how the Laspeyres, Paasche, and Fisher behave differently when you use a fixed base versus when they are chained.\n\nimport pandas as pd\nimport numpy as np\nfrom PriceIndexCalc.pandas_modules.index_methods import bilateral_methods\n\n\n#if not run before, use the helper to clean the data and make it analysis ready\nfrom src.nipa_helper import clean_nipa_data\n\nclean_nipa_data()\n\n\n---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\nCell In[82], line 2\n      1 #if not run before, use the helper to clean the data and make it analysis ready\n----&gt; 2 from src.nipa_helper import clean_nipa_data\n      4 clean_nipa_data()\n\nModuleNotFoundError: No module named 'src'\n\n\n\n\n\nWhile the raw data is a tad hard to work with (and looks awkward in Table 2.3), this data is provided in cleaned csv format in the data\\bronze folder\n\ndf = pd.read_csv(\"../data/silver/NIPA_ard.csv\")\ndf.head()\n\n\n\n\n\n\n\n\nUnnamed: 0\nYears\nid\nquantity\nprice\n\n\n\n\n0\n0\n2000\nMotor Vehicles and Parts\n363.2\n102.00\n\n\n1\n1\n2001\nMotor Vehicles and Parts\n383.3\n102.40\n\n\n2\n2\n2002\nMotor Vehicles and Parts\n401.3\n101.86\n\n\n3\n3\n2003\nMotor Vehicles and Parts\n401.0\n99.08\n\n\n4\n4\n2004\nMotor Vehicles and Parts\n403.9\n98.40\n\n\n\n\n\n\n\nTry the base bilateral indices\n\nbilateral_methods(\n    df_merged, \n    price_col='index',\n    quantity_col='spending',\n    product_id_col='product_name',\n    date_col='Years',\n    method='fisher',\n    plot=True\n    )\n\n\n\n\n\n\n\n\nindex_value\n\n\n\n\n2000\n1.000000\n\n\n2001\n0.976995\n\n\n2002\n0.950021\n\n\n2003\n0.914880\n\n\n2004\n0.895824\n\n\n2005\n0.885266\n\n\n2006\n0.870273\n\n\n2007\n0.854862\n\n\n2008\n0.837859\n\n\n2009\n0.827529\n\n\n2010\n0.822435\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntry the Laspeyres\n\nbilateral_methods(\n    df_merged, \n    price_col='index',\n    quantity_col='spending',\n    product_id_col='product_name',\n    date_col='Years',\n    method='laspeyres',\n    plot=True\n    )\n\n\n\n\n\n\n\n\nindex_value\n\n\n\n\n2000\n1.000000\n\n\n2001\n0.976905\n\n\n2002\n0.949844\n\n\n2003\n0.915297\n\n\n2004\n0.897443\n\n\n2005\n0.888531\n\n\n2006\n0.875934\n\n\n2007\n0.861710\n\n\n2008\n0.847423\n\n\n2009\n0.837340\n\n\n2010\n0.834129"
  },
  {
    "objectID": "notebooks/aizcorbe_example_2.1.html#explore-the-data",
    "href": "notebooks/aizcorbe_example_2.1.html#explore-the-data",
    "title": "Aizcorbe (2014), ex 2.1. Bilateral fixed-base and chained indices",
    "section": "",
    "text": "While the raw data is a tad hard to work with (and looks awkward in Table 2.3), this data is provided in cleaned csv format in the data\\bronze folder\n\ndf = pd.read_csv(\"../data/silver/NIPA_ard.csv\")\ndf.head()\n\n\n\n\n\n\n\n\nUnnamed: 0\nYears\nid\nquantity\nprice\n\n\n\n\n0\n0\n2000\nMotor Vehicles and Parts\n363.2\n102.00\n\n\n1\n1\n2001\nMotor Vehicles and Parts\n383.3\n102.40\n\n\n2\n2\n2002\nMotor Vehicles and Parts\n401.3\n101.86\n\n\n3\n3\n2003\nMotor Vehicles and Parts\n401.0\n99.08\n\n\n4\n4\n2004\nMotor Vehicles and Parts\n403.9\n98.40\n\n\n\n\n\n\n\nTry the base bilateral indices\n\nbilateral_methods(\n    df_merged, \n    price_col='index',\n    quantity_col='spending',\n    product_id_col='product_name',\n    date_col='Years',\n    method='fisher',\n    plot=True\n    )\n\n\n\n\n\n\n\n\nindex_value\n\n\n\n\n2000\n1.000000\n\n\n2001\n0.976995\n\n\n2002\n0.950021\n\n\n2003\n0.914880\n\n\n2004\n0.895824\n\n\n2005\n0.885266\n\n\n2006\n0.870273\n\n\n2007\n0.854862\n\n\n2008\n0.837859\n\n\n2009\n0.827529\n\n\n2010\n0.822435\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntry the Laspeyres\n\nbilateral_methods(\n    df_merged, \n    price_col='index',\n    quantity_col='spending',\n    product_id_col='product_name',\n    date_col='Years',\n    method='laspeyres',\n    plot=True\n    )\n\n\n\n\n\n\n\n\nindex_value\n\n\n\n\n2000\n1.000000\n\n\n2001\n0.976905\n\n\n2002\n0.949844\n\n\n2003\n0.915297\n\n\n2004\n0.897443\n\n\n2005\n0.888531\n\n\n2006\n0.875934\n\n\n2007\n0.861710\n\n\n2008\n0.847423\n\n\n2009\n0.837340\n\n\n2010\n0.834129"
  },
  {
    "objectID": "docs/index.html",
    "href": "docs/index.html",
    "title": "Overview",
    "section": "",
    "text": "This is a personal site that I used to render experiments and workflows that relate to the price statistics domain within official statistics. It is meant to show work in a reproducible manner for anyone else who chooses to look at this. As its personal, it is not meant in any official capacity.",
    "crumbs": [
      "Overview"
    ]
  },
  {
    "objectID": "docs/index.html#purpose-of-site",
    "href": "docs/index.html#purpose-of-site",
    "title": "Overview",
    "section": "",
    "text": "This is a personal site that I used to render experiments and workflows that relate to the price statistics domain within official statistics. It is meant to show work in a reproducible manner for anyone else who chooses to look at this. As its personal, it is not meant in any official capacity.",
    "crumbs": [
      "Overview"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html",
    "href": "docs/notes_on_bilateral_index_methods.html",
    "title": "Notes on bilateral price index methods",
    "section": "",
    "text": "This page provides an overview of Bilateral Price Index methods. Several sources are used (included in the links to the page) to go over key concepts. Emprical examples are linked from this page or can be found in the main guide\n\n\n\nA price index provides an aggregate measure of price change for a particular product segment, industry, or overall economy. … [They compare] the cost of purchasing a set of goods at different points in time. This “set of goods” is often referred to as the “market basket” or the “bundle” of goods. - Aizcorbe (2014)",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#the-concept-of-price-index-methods",
    "href": "docs/notes_on_bilateral_index_methods.html#the-concept-of-price-index-methods",
    "title": "Notes on bilateral price index methods",
    "section": "",
    "text": "A price index provides an aggregate measure of price change for a particular product segment, industry, or overall economy. … [They compare] the cost of purchasing a set of goods at different points in time. This “set of goods” is often referred to as the “market basket” or the “bundle” of goods. - Aizcorbe (2014)",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#laspeyres-index",
    "href": "docs/notes_on_bilateral_index_methods.html#laspeyres-index",
    "title": "Notes on bilateral price index methods",
    "section": "Laspeyres index",
    "text": "Laspeyres index\nThe simplest formula (and one that is commonly used) is the Laspeyres index:\n\\(I^{L}_{0,1} = \\frac{\\sum_{m=1}^{M}(P_{m,1}Q_{m,0})}{\\sum_{m=1}^{M}(P_{m,0}Q_{m,0})}\\)\nWhere P’s and Q’s denote prices and quantities, and 0 and 1 denote two points in time.\nIf M goods are sold in both periods (note that an overlap is needed), we can compare the the cost of purchasing the same goods we bought in period 1 with a certain period in the future.\nWe can also write the Laspeyres as the weighted arithmetic average of the price change of the individual products in the index\n\\(I^L_{0,1} = \\sum_{m=1}^{M} (w_{m,0}\\frac{P_{m,1}}{P_{m,0}})\\) such that \\(w_{m,0} = (P_{m,0}Q_{m,0})/\\sum_{m=1}^{M}(P_{m,0}Q_{m,0})\\)\ngive the ratio of good m’s expenditure to total expenditure, or could also be considered the relative importance or share of the product. There are some key nuances with this approach:\n\nProducts sold in both periods are included in both periods, thus new products are omitted.\nWe fix the relative importance of the goods for both periods based on period 1 weight, thus we do not reflect changes in composition over time (substitution). This can be convenient as we need weights only for the base period.\n\nMost price indices are variants of the Laspeyres, such as the Lowe (which compare the prices from the current month with the previous month, but use weights from a year before that)",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#paashe-index",
    "href": "docs/notes_on_bilateral_index_methods.html#paashe-index",
    "title": "Notes on bilateral price index methods",
    "section": "Paashe Index",
    "text": "Paashe Index\nSimilar to the Lasperyes, however uses a different basket (the one from the pricing period:\n\\(I^P_{0,1} = \\sum_{m=1}^M (P_{m,1}Q_{m,1}) / \\sum_{m=1}^M\n(P_{m,0}Q_{m,1})\\) The Paasche may also be expressed as a function of the weighted average (i.e. shares):\n\\(I^P_{0,1} = 1/ \\sum_{m=1}^M (w_{m,1} \\frac{P_{m,0}}{P_{m,1}})\\) such that \\(w_{m,1} = (P_{m,1}Q_{m,1})/ \\sum_{m=1}^M (w_{m,1}P_{m,0}Q_{m,1})\\)\nThe Laspeyres and Paasche include prices and quantities in both periods, and both use the same relatives with different expenditure shares.",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#fisher-index",
    "href": "docs/notes_on_bilateral_index_methods.html#fisher-index",
    "title": "Notes on bilateral price index methods",
    "section": "Fisher Index",
    "text": "Fisher Index\nThe Fisher does a geometric average of the Laspeyres and the Paasche:\n\\(I^F_{0,1} = (I^L_{0,1}I^P_{0,1})^\\frac{1}{2}\\)\nThe Fisher thus uses expenditure from both periods and thus provides relative importance that are more closely aligned with the goods actually sold. As the Fisher satisfies homogeneity, symmetry, and the time reversal test (the price change from the base to the current should be the inverse of the current to the base) - thus it doesn’t matter what period is chosen as the base.",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#törnqvist-index",
    "href": "docs/notes_on_bilateral_index_methods.html#törnqvist-index",
    "title": "Notes on bilateral price index methods",
    "section": "Törnqvist Index",
    "text": "Törnqvist Index\nSimilar to the Fisher, however it takes the average of the weights instead of averaging the two indices\nIn logged form:\n\\(lnI^T_{0,1}=\\sum^M_{m=1}(w_{m,0}+w_{m,1})/2(ln\\frac{P_{m,1}}{P_{m,0}})\\)",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/notes_on_bilateral_index_methods.html#jevons-index",
    "href": "docs/notes_on_bilateral_index_methods.html#jevons-index",
    "title": "Notes on bilateral price index methods",
    "section": "Jevons Index",
    "text": "Jevons Index\nThe Jevons is unweighted geometric mean. Similar to the Törnqvist, in logged form:\n\\(lnI^J_{0,1} = \\frac{1}{M} \\sum^M_{m=1}ln(P_{m,1}/P_{m,0})\\)\nThe Jevons takes the unweighted average by replacing the \\((w_{m,0}+w_{m,1})/2\\) with \\(1/M\\), thus giving each model equal weight",
    "crumbs": [
      "Notes by method",
      "Notes on bilateral price index methods"
    ]
  },
  {
    "objectID": "docs/price_index_experiments.html",
    "href": "docs/price_index_experiments.html",
    "title": "Experiments catalogue",
    "section": "",
    "text": "This pages lists the experiments done by topic on specific public examples",
    "crumbs": [
      "Experiments catalogue"
    ]
  },
  {
    "objectID": "docs/price_index_experiments.html#list-of-empirical-price-statistics-experiments",
    "href": "docs/price_index_experiments.html#list-of-empirical-price-statistics-experiments",
    "title": "Experiments catalogue",
    "section": "List of empirical price statistics experiments",
    "text": "List of empirical price statistics experiments\n\n\n   \n     \n     \n       Order By\n       Default\n         \n          Title\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nTitle\n\n\nCategories\n\n\n\n\n\n\nAizcorbe (2014), ex 2.1. Bilateral fixed-base and chained indices\n\n\nbilateral index methods, fixed-base indices, chained indices\n\n\n\n\nAizcorbe (2014), ex 2.2. Bilateral indices\n\n\nbilateral index methods, product churn\n\n\n\n\nAizcorbe (2014), ex 3.2. Hedonic dummy variable method\n\n\nhedonic methods\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Experiments catalogue"
    ]
  },
  {
    "objectID": "docs/sampling_methods.html",
    "href": "docs/sampling_methods.html",
    "title": "Sampling methods for scanner data",
    "section": "",
    "text": "Overview\nEven when scanner data is available, not all data necessarily needs to be used to calculate the elementary aggregate price index. There are two sampling approaches that are also typically used as they are quite effective ways to use the data - the static and dynamic sample methods. For a good overview of the topic, see van der Grient and de Haan (2010).\n\n\nFixed sample method\nSimulates field collection but uses scanner data\n\nStep 1: select a large number of items at the beginning of the year which were representative the previous year (need to do analysis to choose this sample)\n\nEach item identified by an EAN (in the Dutch case, stable unique identifier is needed)\nEach item given a weight representing its relative importance\n\nStep 2: a monthly price index for each item is calculated as the unit value in the current month and unit value in the base month\n\nNeed cleaning to make sure unit value is determined\n\nStep 3: an EA is calculated as the weighted average of these item’s relatives using the Laspeyres (as is done on at the higher level).\n\nChain the indices at December to create a long-term series\nOngoing work to replace:\n\nIf there is a big shift (but no exit), a product could be replaced manually using the bridged overlap method. Explicit quality adjustment used only when needed\n\nTO DO: Flush out process of bridged overlap method and explicit quality adjustment used in this case\n\n\nIf an item disappeared – replace it with a similar one (but not with totally new products as these will only be available once the sample is refreshed in December).\n\n\n\n\nDynamic sample method\nPurpose/Idea:\n\nProcedure to do fixed sample method is too labor intensive to extend to many retailers (6 in the Netherlands case) from the a few when the fixed sample method was sufficient. This procedure requires much less manual work.\nThe dynamic method was also found to closely approximate the GEKS\nAn unweighted Jevons is used to avoid chain drifta\nNot used by Netherlands everywhere, only some traditional categories.\n\nProcess as follows:\n\nStep 1: use a cut off method to select a products with most of the sales – as in general a relatively small proportion of products will be responsible for the majority of expenditures and carry the most weight in weighted indices. The threshold chosen in the Dutch case was that 50% of the items are selected to represent 80-85% of expenditures\n\n\\(\\frac{s_{t}+s_{t+1}}{2}&gt;\\frac{1}{n\\times\\lambda}\\)\nWhere\n\\(\\frac{(s_t+s\\_(t+1))}{2}\\) – the product’s average share between the two periods\n\\(n\\) – the number of products\n\\(\\lambda\\) – 1.25\n\nStep 2: Calculate movement for category based on the unit value price in this month over unit value price the previous month.\n\nPre-processing is needed at this stage to get unit prices\nAlso filtering/cleaning applied:\n\nOutlier filter excludes anything 300% higher and 75% decline\nDumping filter is used to exclude strong simultaneous price and quantity decreases – as this dumping in prices without an offsetting price increase will have a downward effect on the index.\n\nEAN used for matched model method, but cleaning/investigation needed to make sure EAN is stable (sometimes retailers recycle EANs). SKU can be used where applicable as it may be more stable (sometimes capture the relaunch problem)\nOnly the first several weeks of data are used – the Dutch case its 3 weeks, consistent with field collection\n\nStep 3: If item is missing – impute its price once (as you may have temporarily missing) by multiplying the last observed price by the Jevons of the category movement\nStep 4: If explicit adjustments needed such as package changes – can be made manually\n\nExamples are change in package sizes that are really the same for the consumer (i.e. EANs are basically too detailed, and we need a way to link/group 2 products together).\nOther implicit quality adjustment stays as per the matched model approach\nTO DO: flush out example\n\nStep 6: Integrate retailer specific COICOP6 indices together using Laspeyres method – i.e. higher-level aggregation unchanged\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Notes by method",
      "Sampling methods for scanner data"
    ]
  },
  {
    "objectID": "notebooks/aizcorbe_example_2.2.html",
    "href": "notebooks/aizcorbe_example_2.2.html",
    "title": "Aizcorbe (2014), ex 2.2. Bilateral indices",
    "section": "",
    "text": "Example of bilateral indices with product churn (from Aizcorbe 2014, example 2.2)\nIn Example 2.2, Aizcorbe uses the DRAM dataset to demonstrate how to construct bilateral price indices with product churn.\n\n\n\n\n Back to top"
  }
]